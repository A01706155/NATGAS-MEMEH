<%- include('partials/head.ejs') %>
<%- include('partials/navbar.ejs') %>

    </div>

    <div class="container white-text">
        <div>
                        
                <table class="table table-responsive-md table-striped table-dark white-text">
                 
                  <thead>
                    <tr>
                      <th scope="col">Id del Caso de uso</th>
                      <th scope="col">Nombre</th>
                      <th scope="col">Descripcion</th>
                      <th scope="col">Id del Proyecto</th>
                      <th scope="col">Dificultad</th>
                      <th scope="col">Iteracion</th>
                      <th></th>
                      <th></th>
                  
                      
                      <th scope="col"></th>
                    </tr>
                  </thead>
                  
                  <tbody>
                    <% for (let CasoDeUso of lista_casosdeuso) { %>
                    
                    <tr>
                      <th scope="row" ><%= CasoDeUso.IdCasoDeUso %></th>
                      <td><%= CasoDeUso.nombre %> </td>
                      <td><%= CasoDeUso.descripcion %></td>
                      <td><%= CasoDeUso.idProyecto %> </td>
                      <td><%= CasoDeUso.dificultad %></td>
                      <td><%= CasoDeUso.iteracion %></td>
                      
                      <td> <button name="opt"><a href="/casosdeuso/<%= CasoDeUso.IdCasoDeUso %>">Editar</a></button></td>
                      
                      <td> <button name="opt"><a href="/casosdeuso/<%= CasoDeUso.IdCasoDeUso %>/<%= CasoDeUso.idProyecto %>">Ver tareas asociadas</a></button></td>                      
                      <td>
                            <form action="/casosdeuso/eliminar-casoDeUso" method="POST" id="eliminar_<%= CasoDeUso.IdCasoDeUso %>">
                                <input type="hidden" name="IdCasoDeUso" value="<%= CasoDeUso.IdCasoDeUso %>">
                                <button type="submit" name="add">Borrar</button>

                                <script> 
                                    document.getElementById("eliminar_<%= CasoDeUso.IdCasoDeUso %>").addEventListener('submit', (e) => {
                                      let confirmacion = confirm('¿Estás seguro de eliminar el caso de uso?');
                                      if(!confirmacion){
                                        e.preventDefault();
                                      }  
                                    });
                                </script>

                            </form>                          
                      </td> 
                         


                    </tr>
                    
                    <% } %> 
                  </tbody>
                </table>               
            
            
           
                        
                     
                
                <% for (let CasoDeUso of lista_casosdeuso) { %>
            <button name="opt"><a href="/proyectos/detalles/<%=CasoDeUso.idProyecto %>" class="btn " > Volver al proyecto </a></button>
            <button name="opt"><a href="/proyectos/nuevocaso/<%=CasoDeUso.idProyecto %>" class="btn"> Crear nuevo</a></button>
            <% } %> 
            
                

        </div>
    </div>    


    <%- include('partials/footer.ejs') %>
    
    <script type="text/javascript" src="/js/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
</body>


</html>